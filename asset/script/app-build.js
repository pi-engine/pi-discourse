/**
 * @license RequireJS text 2.0.5+ Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("storage/appStorage",[],function(){var e=!1;return e?window.sessionStorage:{}}),define("router/Router",[],function(){return Backbone.Router.extend({routes:{"":"categoryList",c:"categoryList","c/:id":"category","t/:id":"topic","u/:id":"user"},categoryList:function(){console.log("Going to category list"),require(["controller/categoryList"],function(e){e.run()})},category:function(e){console.log("Going to category "+e),require(["controller/category"],function(t){t.run(e)})},topic:function(e){console.log("Going to topic "+e),require(["controller/topic"],function(t){t.run(e)})},user:function(e){console.log("Going to user "+e),require(["controller/user"],function(t){t.run(e)})},defaultRoute:function(e){}})}),define("model/User",[],function(){return Backbone.Model.extend({initialize:function(e){"undefined"==typeof e.name&&(e.name="Anonymous")},defaults:{}})}),define("model/Category",[],function(){return Backbone.Model.extend({initialize:function(e){}})}),define("collection/UserCollection",["model/User"],function(e){return Backbone.Collection.extend({model:e})}),define("collection/CategoryCollection",["model/Category"],function(e){return Backbone.Collection.extend({model:e})}),define("view/UnreadNotificationRow",["storage/appStorage"],function(e){return Backbone.View.extend({initialize:function(e){this.$el=$("#unread-notification-container"),this.notification=e,this.render()},render:function(){this.notification.data=JSON.parse(this.notification.data);var t=this.notification,n=_.template(e.templates.unreadNotificatioRowTemplate,t);this.$el.append(n)}})}),define("view/MainHeader",["storage/appStorage","view/UnreadNotificationRow"],function(e,t){return Backbone.View.extend({el:$("#main-header"),events:{"click #user-notifications":"showNotification","click #site-map":"showSiteMap","click #search":"showSearchBox"},initialize:function(){this.render()},render:function(){var t=this.prepareVariables(),n=_.template(e.templates.mainHeaderTemplate,t);this.$el.append(n)},prepareVariables:function(){return{user:e.user,all_categories:e.categories,appStorage:e}},showNotification:function(){var e=$("#user-notifications");e.hasClass("active")?(e.removeClass("active"),$("#notifications-dropdown").css("display","none")):(_.each($(".dropdown"),function(e){$(e).removeClass("active")}),_.each($(".d-dropdown"),function(e){$(e).css("display","none")}),require("controller/header").getNotification(),e.addClass("active"),$("#notifications-dropdown").css("display","block"))},showSiteMap:function(){var e=$("#site-map");e.hasClass("active")?(e.removeClass("active"),$("#site-map-dropdown").css("display","none")):(_.each($(".dropdown"),function(e){$(e).removeClass("active")}),_.each($(".d-dropdown"),function(e){$(e).css("display","none")}),e.addClass("active"),$("#site-map-dropdown").css("display","block"))},showSearchBox:function(){var e=$("#search");e.hasClass("active")?(e.removeClass("active"),$("#search-dropdown").css("display","none")):(_.each($(".dropdown"),function(e){$(e).removeClass("active")}),_.each($(".d-dropdown"),function(e){$(e).css("display","none")}),e.addClass("active"),$("#search-dropdown").css("display","block"))},renderNotification:function(e){$("#unread-notification-container").empty(),e.err_msg?console.log(e):e.count>0?($("#unread-notifications-count").css("display","block"),$("#unread-notifications-count").html(e.count),_.each(e.notifications,function(e){var n=new t(e)})):($("#unread-notifications-count").css("display","none"),$("#unread-notifications-count").html(0),$("#unread-notification-container").append($("<li>no unread notification</li>")))}})}),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h=[],p=e.config&&e.config()||{};t={version:"2.0.5+",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),define("text!template/main-header-template.bhtml",[],function(){return'<script type="text/template" id="main-header-template">\r\n<div class="container">\r\n    <div class="contents clearfix">\r\n        <div class="title">\r\n            <a href="/discourse/c">\r\n                <img class="logo-big" src="/asset/module-discourse/image/d-logo-sketch.png" alt="Pi-discourse" id="site-logo">\r\n            </a>\r\n        </div>\r\n        <div class="ember-view extra-info-wrapper">\r\n            <div class="ember-view extra-info">\r\n                <a class="star" href="#" title="add this topic to your favorites list"></a>\r\n                <h1>\r\n                    <div class="ember-view topic-statuses"></div>\r\n                    <a class="topic-link" href="/t/1">Welcome message area on the home page for anonymous users</a>\r\n                    <a href="/category/feature" class="badge-category" title="Discussion about features or potential features of Discourse: how they work, why they work, etc." style="background-color: #0E76BD; color: #FFFFFF;">feature</a>\r\n                </h1>\r\n            </div>\r\n        </div>\r\n        <div class="panel clearfix">\r\n            <div class="current-username">\r\n                <a href="/discourse/u/<%= user.get(\'id\') %>" data-bindattr-4="4"><%= user.get(\'name\') %></a>\r\n            </div>\r\n            <ul class="icons clearfix">\r\n                <li class="notifications dropdown" id="user-notifications">\r\n                    <a class="icon" style="cursor:pointor" title="notifications of @name mentions, replies to your posts and topics, private messages, etc">\r\n                        <i class="icon-comment"></i>\r\n                    </a>\r\n                    <% if (typeof appStorage.notificationCount !== \'undefined\' && appStorage.notificationCount > 0) {%>\r\n                        <a id="unread-notifications-count" href="#" class="badge-notification unread-notifications" style="display:block"><%= appStorage.notificationCount %></a>\r\n                    <% } else { %>\r\n                        <a id="unread-notifications-count" href="#" class="badge-notification unread-notifications" style="display:none">0</a>\r\n                    <% } %>\r\n                    <!--<a href="#" class="badge-notification unread-private-messages">1</a>-->\r\n                </li>\r\n                <li class="dropdown" id="search">\r\n                    <a class="icon expand" style="cursor:pointor" title="search for topics, posts, users, or categories">\r\n                        <i class="icon-search"></i>\r\n                    </a>\r\n                </li>\r\n                <li class="categories dropdown" id="site-map">\r\n                    <a class="icon" style="cursor:pointor" title="go to another topic list or category">\r\n                        <i class="icon-reorder"></i>\r\n                    </a>\r\n                </li>\r\n                <li class="current-user">\r\n                    <a class="ember-view icon" href="/discourse/u/<%= user.get(\'id\') %>" title="go to your user page">\r\n                        <img width="32" height="32" src="https://www.gravatar.com/avatar/<%= user.get(\'avatar\') %>.png?s=32&r=pg&d=identicon" class="avatar" title="<%= user.get(\'name\') %>">\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n            <div id="search-dropdown" class="ember-view d-dropdown" style="display: none;">\r\n                <input id="ember634" class="ember-view ember-text-field" placeholder="type your search terms here" type="text">\r\n            </div>\r\n            <section class="d-dropdown" id="notifications-dropdown" style="display: none;">\r\n                <ul>\r\n                    <div id="unread-notification-container">\r\n                    </div>\r\n                    <!--<li class="read last">\r\n                        <a href="/users/liquan">Refresh</a>\r\n                    </li>-->\r\n                </ul>\r\n            </section>\r\n            <section class="d-dropdown" id="site-map-dropdown" style="display: none;">\r\n                <ul>\r\n                    <li>\r\n                        <a id="ember648" class="ember-view active" href="/" title="the most recent topics">Latest</a>\r\n                    </li>\r\n                    <li><a href="/faq">FAQ</a></li>\r\n\r\n                    <li class="heading" title="all topics grouped by category">\r\n                        <a id="ember650" class="ember-view" href="/categories">Categories</a>\r\n                    </li>\r\n                    <li class="category">\r\n                        <a href="/category/discourse" class="badge-category" title="Topics about the Discourse forum software itself: how it works, how to use it, discussion about culture, UI, and design." style="background-color: #00B355; color: #FFFFFF;">discourse</a>\r\n                        <b>9</b>\r\n                    </li>\r\n                    <li class="category">\r\n                        <a href="/category/tech" class="badge-category" title="Topics about technology: computers, gadgets, phones, cameras, the Intertubes, or any other IT aspects of the world." style="background-color: #444; color: #FFFFFF;">tech</a>\r\n                        <b>5</b>\r\n                    </li>\r\n                    <li class="category">\r\n                        <a href="/category/music" class="badge-category" title="Topics about music, musicians, bands, and songs. Is that freedom rock? Well, turn it up, man!" style="background-color: #DAA520; color: #FFFFFF;">music</a>\r\n                        <b>0</b>\r\n                    </li>\r\n                </ul>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n</script>'}),define("text!template/main-header-unread-notification-row-template.bhtml",[],function(){return'<script type="text/template" id="main-header-unread-notification-row-template">\r\n<li class=""><i class="icon icon-reply" title="reply"></i> <%= data.display_username %> <a href="/discourse/t/<%= topic_id %>"><%= data.topic_title %></a></li>\r\n</script>'}),define("controller/header",["storage/appStorage","view/MainHeader","text!template/main-header-template.bhtml","text!template/main-header-unread-notification-row-template.bhtml"],function(e,t,n,r){return{mainHeaderView:null,getNotification:function(){$.ajax({url:"/discourse/notification/"+e.user.id+"/1/1",type:"GET",async:!1,success:function(e){e=JSON.parse(e),require("controller/header").mainHeaderView.renderNotification(e)}})},run:function(){console.log("running header.js"),e.templates.mainHeaderTemplate=$(n).html(),e.templates.unreadNotificatioRowTemplate=$(r).html(),e.notificationCount=PreloadStore.data.notificationCount,this.mainHeaderView=new t}}}),define("view/CategoryListContainer",["storage/appStorage"],function(e){return Backbone.View.extend({initialize:function(){this.$el=$("#d-container"),this.render()},render:function(){var t=_.template(e.templates.categoryListContainerTemplate);this.$el.append(t)}})}),define("view/CategoryList",["storage/appStorage"],function(e){return Backbone.View.extend({initialize:function(){},render:function(t){var n={color:t.get("color"),id:t.get("id"),name:t.get("name"),slug:t.get("slug")},r=_.template(e.templates.categoryListTemplate,n);this.$el.append(r)}})}),define("view/CategoryListTopic",["storage/appStorage"],function(e){return Backbone.View.extend({initialize:function(){},render:function(t){variables={id:t.get("id"),title:t.get("title"),category_id:t.get("category_id"),posts_count:t.get("posts_count"),time_created:"created at "+t.get("time_created")};var n=_.template(e.templates.categoryListTopicTemplate,variables);this.$el.append(n)}})}),define("view/CategoryCreate",["storage/appStorage"],function(e){return Backbone.View.extend({el:$("#main-outlet"),initialize:function(){},events:{"click #close-create-window":"closeCreateWindow","click #btn-category-create-submit":"submit"},closeCreateWindow:function(){$("#modal").remove(),$("#discourse-modal").remove()},submit:function(){var e=$("#new-category-name").val(),t=$("#new-category-description").val(),n=$("#new-category-background-color").val(),r=$("#new-category-foreground-color").val();e.length!==0&&t.length!==0&&n.match("^[0-9a-fA-F]{6}$")!==null&&r.match("^[0-9a-fA-F]{6}$")!==null?require("controller/categoryList").createCategory(e,n,t):console.log("invalid input")},render:function(){var t=_.template(e.templates.categoryCreateTemplate);this.$el.append(t)}})}),define("model/Topic",[],function(){return Backbone.Model.extend({initialize:function(){}})}),define("collection/TopicCollection",["model/Topic"],function(e){return Backbone.Collection.extend({})}),define("view/CategoryListMain",["storage/appStorage","view/CategoryListContainer","view/CategoryList","view/CategoryListTopic","view/CategoryCreate","collection/TopicCollection"],function(e,t,n,r,i,s){return Backbone.View.extend({el:$("#main-outlet"),events:{"click #btn-create-new-category":"showCreateCategoryWindow"},initialize:function(){this.render();var i=new t,o=0;_.each(e.categoryTopics,function(t){var i=e.categories.get(t.category_id);i.set("topics",new s(t.topics));var u=new n({el:$("#category_container_first")}),a=new n({el:$("#category_container")});o%2===0?u.render(i):a.render(i),o++,_.each(i.get("topics").models,function(e){var t=new r({el:$("#category_topic_table_"+e.get("category_id"))});t.render(e)})})},render:function(){var t=_.template(e.templates.categoryListMainTemplate);this.$el.append(t)},showCreateCategoryWindow:function(){var e=require("controller/categoryList");$("#discourse-modal").length===0&&($("body").append('<div id="modal" class="modal-backdrop  in"></div>'),e.categoryCreateView=e.categoryCreateView||new i,e.categoryCreateView.render())}})}),define("text!template/category-list-container-template.bhtml",[],function(){return'<script type="text/template" id="category-list-container-template">\r\n    <div class="row">\r\n        <div class="full-width">\r\n            <div id="list-area">\r\n                <div class="ember-view">\r\n                    <section class="category-column first">\r\n                        <div id="category_container_first"></div>\r\n                    </section>\r\n                    <section class="category-column">\r\n                        <div id="category_container"></div>\r\n                    </section>\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</script>'}),define("text!template/category-list-template.bhtml",[],function(){return'<script type="text/template" id="category-list-template">\r\n    <div class="ember-view category-list-item">\r\n        <table id="topic-list">\r\n            <tbody id="category_topic_table_<%= id %>">\r\n                <tr>\r\n                    <th>\r\n                        <a href="/discourse/c/<%= id %>" class="badge-category" title="<%= slug %>" style="background-color: #<%= color %>; color: #FFFFFF;"><%= name %></a>\r\n                    </th>\r\n                    <th class="num">Posts</th>\r\n                    <th class="num">Age</th>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <footer class="clearfix">\r\n            <figure title="topics posted in the last 365 days">\r\n                <span class="number" title="128">128</span>\r\n                <figcaption>year</figcaption>\r\n            </figure>\r\n            <figure title="topics posted in the last 30 days">\r\n                <span class="number" title="44">44</span>\r\n                <figcaption>month</figcaption>\r\n            </figure>\r\n            <figure title="topics posted in the last 7 days">\r\n                <span class="number" title="15">15</span>\r\n                <figcaption>week</figcaption>\r\n            </figure>\r\n            <a href="/category/support" class="btn btn-small">view all 133...</a>\r\n        </footer>\r\n    </div>\r\n</script>'}),define("text!template/category-list-topic-template.bhtml",[],function(){return'<script type="text/template" id="category-list-topic-template">\r\n<tr>\r\n    <td class="main-link">\r\n        <div class="topic-inset">\r\n            <a href="/discourse/t/<%= id %>" class="title"><%= title %></a>\r\n        </div>\r\n    </td>\r\n    <td class="num">\r\n        <span class="badge-posts">\r\n            <span class="number"><%= posts_count %></span>\r\n        </span>\r\n    </td>\r\n    <td class="num">\r\n        <span class="age" title="<%= time_created %>">19h</span>\r\n    </td>\r\n</tr>\r\n</script>'}),define("text!template/category-list-main-template.bhtml",[],function(){return'<script type="text/template" id="category-list-main-template">\r\n<div class="ember-view">\r\n    <div id="list-controls">\r\n        <div class="container">\r\n            <ul class="nav nav-pills" id="category-filter">\r\n                <li class="ember-view" id="topic-filter-latest" title="the most recent topics">\r\n                    <a href="/discourse/latest">Latest</a>\r\n                </li>\r\n                <li class="ember-view active" id="topic-filter-category" title="the most recent topics">\r\n                    <a href="/discourse/c">Cagetories</a>\r\n                </li>\r\n            </ul>\r\n            <button class="btn btn-default" id="btn-create-new-category">\r\n                <i class="icon icon-plus"></i>Create Category\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="container" id="d-container">\r\n    </div>\r\n</div>\r\n</script>'}),define("text!template/category-create-template.bhtml",[],function(){return'<script type="text/template" id="category-create-template">\r\n<div id="discourse-modal" class="ember-view modal hidden in" style="display: block;">\r\n    <div id="ember285" class="ember-view">\r\n        <div class="modal-header">\r\n            <a id="close-create-window" class="close" data-dismiss="modal">\r\n                <i class="icon-remove icon"></i>\r\n            </a>\r\n            <h3>Create Category</h3>\r\n        </div>\r\n        <div id="modal-alert" style="display: none;"></div>\r\n    </div>\r\n    <div id="ember288" class="ember-view">\r\n        <div id="ember880" class="ember-view">\r\n            <div class="modal-body">\r\n                <form>\r\n                    <label>Category Name</label>\r\n                    <input id="new-category-name" class="ember-view ember-text-field" placeholder="Should be short and succinct." maxlength="50" type="text">\r\n                    <div class="description-controls" style="margin-bottom: 20px">\r\n                        <label>Description</label>\r\n                        <input id="new-category-description" class="ember-view ember-text-field" placeholder="Description of this category." maxlength="50" type="text">\r\n                    </div>\r\n                <!-- \r\n                    <label>Hotness</label>\r\n                    <div style="display:inline;width:50px;height:60px;">\r\n                        <canvas width="50" height="60px"></canvas>\r\n                        <input type="text" id="hotness-dial" data-fgcolor="red" style="width: 29px; height: 16px; position: absolute; vertical-align: middle; margin-top: 16px; margin-left: -39px; border: 0px; background-image: none; font-weight: bold; font-style: normal; font-variant: normal; font-size: 12px; line-height: normal; font-family: Arial; text-align: center; color: rgb(255, 0, 0); padding: 0px; -webkit-appearance: none; background-position: initial initial; background-repeat: initial initial;">\r\n                    </div>\r\n                -->\r\n                    <label>Badge colors</label>\r\n                    <div class="category-color-editor">\r\n                        <span class="badge-category" style="background-color: #AB9364; color: #FFFFFF;" data-bindattr-36="36">preview</span>\r\n                        <div class="input-prepend input-append" style="margin-top: 10px;">\r\n                            <span class="color-title">Background color:</span>\r\n                            <span class="add-on">#</span>\r\n                            <input id="new-category-background-color" class="ember-view ember-text-field" placeholder="Any web color" maxlength="6" type="text" value="772277">\r\n                        <!--\r\n                            <div id="ember896" class="ember-view colors-container">\r\n                                <button id="ember897" class="ember-view colorpicker" style="background-color: #BF1E2E;"></button>\r\n                                <button id="ember898" class="ember-view colorpicker" style="background-color: #F1592A;"></button>\r\n                                <button id="ember899" class="ember-view colorpicker" style="background-color: #F7941D;"></button>\r\n                                <button id="ember900" class="ember-view colorpicker" style="background-color: #9EB83B;"></button>\r\n                                <button id="ember901" class="ember-view colorpicker" style="background-color: #3AB54A;"></button>\r\n                                <button id="ember902" class="ember-view colorpicker" style="background-color: #12A89D;"></button>\r\n                                <button id="ember903" class="ember-view colorpicker" style="background-color: #25AAE2;"></button>\r\n                                <button id="ember904" class="ember-view colorpicker" style="background-color: #0E76BD;"></button>\r\n                                <button id="ember905" class="ember-view colorpicker" style="background-color: #652D90;"></button>\r\n                                <button id="ember906" class="ember-view colorpicker" style="background-color: #92278F;"></button>\r\n                                <button id="ember907" class="ember-view colorpicker" style="background-color: #ED207B;"></button>\r\n                                <button id="ember908" class="ember-view colorpicker" style="background-color: #8C6238;"></button>\r\n                                <button id="ember909" class="ember-view colorpicker" style="background-color: #231F20;"></button>\r\n                                <button id="ember910" class="ember-view colorpicker" style="background-color: #808281;"></button>\r\n                                <button id="ember911" class="ember-view colorpicker" style="background-color: #B3B5B4;"></button>\r\n                                <button id="ember912" class="ember-view colorpicker" style="background-color: #283890;"></button>\r\n                            </div>\r\n                        -->\r\n                        </div>\r\n                        <div class="input-prepend input-append">\r\n                            <span class="color-title">Foreground color:</span>\r\n                            <span class="add-on">#</span>\r\n                            <input id="new-category-foreground-color" class="ember-view ember-text-field" placeholder="Any web color" maxlength="6" type="text" value="FFFFFF">\r\n                        <!--\r\n                            <div id="ember914" class="ember-view colors-container">\r\n                                <button id="ember915" class="ember-view colorpicker" style="background-color: #FFFFFF;"></button>\r\n                                <button id="ember916" class="ember-view colorpicker" style="background-color: #000000;"></button>\r\n                            </div>\r\n                        -->\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button id="btn-category-create-submit" class="btn btn-primary" data-bindattr-37="37" data-ember-action="38">Create Category</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div id="ember289" class="ember-view">\r\n    </div>\r\n</div>\r\n</script>'}),define("controller/categoryList",["storage/appStorage","view/CategoryListMain","view/CategoryListContainer","view/CategoryListTopic","view/CategoryList","view/CategoryCreate","text!template/category-list-container-template.bhtml","text!template/category-list-template.bhtml","text!template/category-list-topic-template.bhtml","text!template/category-list-main-template.bhtml","text!template/category-create-template.bhtml"],function(e,t,n,r,i,s,o,u,a,f,l){return{categoryCreateView:null,createCategory:function(e,t,n){$.ajax({url:"/discourse/category",type:"POST",data:{name:e,color:t,slug:n},async:!1,success:function(e){e=JSON.parse(e),e.err_msg?console.log(e.err_msg):window.location.reload()}})},run:function(){console.log("running categoryList.js"),e.templates.categoryListContainerTemplate=$(o).html(),e.templates.categoryListTemplate=$(u).html(),e.templates.categoryListTopicTemplate=$(a).html(),e.templates.categoryListMainTemplate=$(f).html(),e.templates.categoryCreateTemplate=$(l).html(),PreloadStore.data?(e.categoryTopics=PreloadStore.data.categoryTopics,PreloadStore.data=null):(console.log("request for data"),$.ajax({url:"/discourse/c.json",type:"GET",async:!1,success:function(e){e=JSON.parse(e),require("storage/appStorage").categoryTopics=e}})),$("#main-outlet").empty();var n=new t}}}),define("view/TopicListTableRow",["storage/appStorage"],function(e){return Backbone.View.extend({initialize:function(){this.$el=$("#topic-list-table"),this.render(),$("#topic-"+this.model.id+" a.icon-star").bind("click",this.star),e.topics.get(this.model.id).on("change",this.update,this)},render:function(){if(!this.model.get("newCreated")){variables=this.getModelVariables(this.model);var t=_.template(e.templates.topicListTableRowTemplate,variables);this.$el.append(t)}else{variables=this.getModelVariables(this.model);var t=_.template(e.templates.topicListTableRowTemplate,variables);$(".icon.icon-pushpin :last").length>0?$(".icon.icon-pushpin :last").parent().parent().parent().parent().after(t):$(".topic-list-item :first").before(t)}},update:function(){starred=e.topics.get(this.model.id).get("starred"),starred===1?this.$("#topic-"+this.model.id+" a.icon-star").addClass("starred"):this.$("#topic-"+this.model.id+" a.icon-star").removeClass("starred")},getModelVariables:function(t){return{title:t.get("title"),id:t.get("id"),like_count:t.get("like_count")+" ",posts_count:t.get("posts_count"),time_created:t.get("time_created"),time_from_created:t.get("time_from_created"),time_last_posted:t.get("time_last_posted"),time_from_last_posted:t.get("time_from_last_posted"),category_id:t.get("category_id"),views:t.get("views"),categoryInfo:e.categories.get(t.get("category_id")),starred:t.get("starred"),pinned:t.get("pinned"),isVisible:t.get("visible"),closed:t.get("closed")}},star:function(){var t=require("controller/category");topicId=this.parentNode.parentNode.attributes.identity.value,e.topics.get(topicId).get("starred")===1?targetStatus=0:targetStatus=1,t.star(targetStatus)}})}),define("view/TopicListContainer",["storage/appStorage","view/TopicListTableRow"],function(e,t){return Backbone.View.extend({initialize:function(){this.$el=$("#d-container"),this.render(),_.each(e.topics.models,function(e){var n=new t({model:e})})},render:function(){var t=_.template(e.templates.topicListContainerTemplate);this.$el.append(t)}})}),define("view/TopicCreate",["storage/appStorage"],function(e){return Backbone.View.extend({el:$("#main"),initialize:function(){},events:{"click #create-topic-toggler":"closeCreateWindow","click #submit_cancel":"closeCreateWindow","click #btn-topic-create-submit":"submit"},closeCreateWindow:function(){$("#reply-control").remove()},submit:function(){var t=require("controller/category"),n=$("#reply-title").val(),r=CKEDITOR.instances.editor1.getData();n.length!==0&&r.length!==0?t.createTopic(n,r,e.currentCategory.id):console.log("invalid input")},render:function(){var t=_.template(e.templates.topicCreateTemplate);this.$el.append(t)}})}),define("view/TopicListMain",["storage/appStorage","view/TopicListContainer","view/TopicCreate"],function(e,t,n){return Backbone.View.extend({el:$("#main-outlet"),events:{"click #btn-create-new-topic":"showCreateTopicWindow"},initialize:function(){this.render();var e=new t},render:function(){var t=_.template(e.templates.topicListMainTemplate);this.$el.append(t)},showCreateTopicWindow:function(){categoryController=require("controller/category"),$("#reply-control").length===0&&(categoryController.topicCreateView=categoryController.topicCreateView||new n,categoryController.topicCreateView.render(),CKEDITOR.replace("editor1"))}})}),define("text!template/topic-list-container-template.bhtml",[],function(){return'<script type="text/template" id="topic-list-container-template">\r\n    <div class="row">\r\n        <div class="full-width">\r\n            <div id="list-area">\r\n                <div class="ember-view">\r\n                    <div class="contents">\r\n                        <table id="topic-list">\r\n                            <thead>\r\n                                <tr>\r\n                                    <% if (!require(\'storage/appStorage\').user.get(\'isguest\')) { %>\r\n                                        <th>&nbsp;</th>\r\n                                    <% } %>\r\n                                    <th>Topic</th>\r\n                                    <th>Category</th>\r\n                                    <th>Participants</th>\r\n                                    <th class="num">Posts</th>\r\n                                    <th class="num">Likes</th>\r\n                                    <th class="num">Views</th>\r\n                                    <th class="num activity" colspan="2">Activity</th>\r\n                                </tr>\r\n\r\n                            </thead>\r\n                            <tbody class="ember-view" id="topic-list-table">\r\n                                \r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <footer id="topic-list-bottom"></footer>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</script>\r\n'}),define("text!template/topic-list-table-row-template.bhtml",[],function(){return'<script type="text/template" id="topic-list-table-row-template">\r\n    <tr class="ember-view topic-list-item" id="topic-<%= id %>" identity="<%= id %>" pinned="<%= pinned %>" isVisible="<%= isVisible %>" closed="<%= closed %>">\r\n        <% if (!require(\'storage/appStorage\').user.get(\'isguest\')) { %>\r\n            <td class="star">\r\n                <% if (starred == 0) { %>\r\n                    <a class="star icon-star" style="cursor:pointer" title="add this topic to your favorites list"></a>\r\n                <% } else { %>\r\n                    <a class="star icon-star starred" style="cursor:pointer" title="remove this topic from your favorites list"></a>\r\n                <% } %>\r\n            </td>\r\n        <% } %>\r\n        <td class="main-link clearfix">\r\n            <div class="ember-view topic-statuses">\r\n            <% if (pinned == 1) { %>\r\n                <span title="this topic is pinned; it will display at the top of its category" class="topic-status">\r\n                    <i class="icon icon-pushpin"></i>\r\n                </span>\r\n            <% } %>\r\n            </div>\r\n\r\n            <a href="/discourse/t/<%= id %>" class="title"><%= title %></a>\r\n        </td>\r\n        <td class="category">\r\n            <a href="/discourse/c/<%= category_id %>" class="badge-category" title="<%= categoryInfo.get(\'slug\') %>" style="background-color: #<%= categoryInfo.get(\'color\') %>; color: #FFFFFF;"><%= categoryInfo.get(\'name\') %></a>\r\n        </td>\r\n        <td class="posters">\r\n            <a></a><a></a>\r\n        </td>\r\n        <td class="num">\r\n            <a href="/discourse/t/<%= id %>" class="badge-posts">\r\n                <span class="number" title="<%= posts_count %> posts in this topic"><%= posts_count %></span>\r\n            </a>\r\n        </td>\r\n        <td class="num">\r\n            <a href="/discourse/t/<%= id %>" title="there are <%= like_count %> likes in this topic"><%= like_count %><i class="icon-heart"></i></a>\r\n        </td>\r\n        <td class="num">\r\n            <span class="number" title="this topic has been viewed <%= views %> times"><%= views %></span>\r\n        </td>\r\n        <td class="num activity">\r\n            <a class="age coldmap-high" title="First post: <%= time_created %>"><%= time_from_created %></a>\r\n        </td>\r\n        <td class="num activity last">\r\n            <a class="age" title="Last post: <%= time_last_posted %>"><%= time_from_last_posted %></a>\r\n        </td>\r\n    </tr>\r\n</script>'}),define("text!template/topic-create-template.bhtml",[],function(){return'<script type="text/template" id="topic-create-template">\r\n    <!--- class="ember-view processed closed" ---->\r\n    <!--- class="ember-view processed open edit-title topic show-preview" ---->\r\n    <div id="reply-control" class="ember-view processed open edit-title topic">\r\n        <div class="grippie"></div>\r\n        <div class="spinner">Uploading...</div>\r\n        <div class="contents">\r\n            <div id="new-user-education" class="composer-popup" style="display: none; bottom: 400px;">\r\n                <a href="#" class="close"><i class="icon icon-remove-sign"></i></a>\r\n            </div>\r\n            <div id="similar-topics" class="composer-popup" style="display: none; bottom: 400px;">\r\n                <a href="#" ><i class="icon icon-remove-sign"></i></a>\r\n                <h3>Your topic is similar to...</h3>\r\n                <h3><ul class="topics"></ul></h3>\r\n            </div>\r\n\r\n            <div class="control">\r\n                <a href="#" class="toggler" title="toggle" id="create-topic-toggler"></a>\r\n                <div class="control-row reply-area">\r\n                    <div class="reply-to">Create a new Topic:</div>\r\n                    <div class="form-element clearfix">\r\n                        <input id="reply-title" class="ember-view ember-text-field span8" placeholder="Type your title here. What is this discussion about in one brief sentence?" maxlength="255" tabindex="2" type="text">\r\n                        <select id="ember1341" class="ember-view combobox chzn-done" style="display: none;">\r\n                            <option value="">(no category)</option>\r\n                            <option value="meta" data-color="B3B5B4" data-text_color="FFFFFF" data-description="Use the \'meta\' category to discuss this forum -- things like deciding what sort of topics and replies are appropriate here, what the standards for posts and behavior are, and how we should moderate our community.">meta</option>\r\n                            <option value="tests" data-color="AB9364" data-text_color="FFFFFF" data-description="null">tests</option>\r\n                            <option selected="" value="category_01" data-color="25AAE2" data-text_color="FFFFFF" data-description="null">category_01</option>\r\n                            <option value="pintech" data-color="3AB54A" data-text_color="FFFFFF" data-description="null">pintech</option>\r\n                            <option value="WOT" data-color="AB9364" data-text_color="FFFFFF" data-description="null">WOT</option>\r\n                        </select>\r\n                        <div id="ember1341_chzn" class="chzn-container chzn-container-single" style="width: 220px;">\r\n                            <a href="javascript:void(0)" class="chzn-single">\r\n                                <span>category_01</span>\r\n                                <div><b></b></div>\r\n                            </a>\r\n                            <div class="chzn-drop" style="left: -9000px; width: 218px; top: 34px;">\r\n                                <div class="chzn-search">\r\n                                    <input type="text" autocomplete="off" style="width: 188px;">\r\n                                </div>\r\n                                <ul class="chzn-results">\r\n                                    <li id="ember1341_chzn_o_0" class="active-result" style="">(no category)</li>\r\n                                    <li id="ember1341_chzn_o_1" class="active-result" style="">\r\n                                        <span class="badge-category" style="background-color: #B3B5B4; color: #FFFFFF;" title="Use the \'meta\' category to discuss this forum -- things like deciding what sort of topics and replies are appropriate here, what the standards for posts and behavior are, and how we should moderate our community.">meta</span>\r\n                                    </li>\r\n                                    <li id="ember1341_chzn_o_2" class="active-result" style="">\r\n                                        <span class="badge-category" style="background-color: #AB9364; color: #FFFFFF;">tests</span>\r\n                                    </li>\r\n                                    <li id="ember1341_chzn_o_3" class="active-result result-selected" style="">\r\n                                        <span class="badge-category" style="background-color: #25AAE2; color: #FFFFFF;">category_01</span>\r\n                                    </li>\r\n                                    <li id="ember1341_chzn_o_4" class="active-result" style="">\r\n                                        <span class="badge-category" style="background-color: #3AB54A; color: #FFFFFF;">pintech</span>\r\n                                    </li>\r\n                                    <li id="ember1341_chzn_o_5" class="active-result" style="">\r\n                                        <span class="badge-category" style="background-color: #AB9364; color: #FFFFFF;">WOT</span>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                        <div class="textarea-wrapper">\r\n                            <textarea id="editor1" class="ckeditor ember-view ember-text-area" placeholder="Type your reply here. Use Markdown or BBCode to format. Drag or paste an image here to upload it." tabindex="3"></textarea>\r\n                        </div>\r\n                    <div class="submit-panel">\r\n                        <!--\r\n                        <button tabindex="4" disabled="disabled" class="btn btn-primary create">Create Topic</button>\r\n                        -->\r\n                        <button id="btn-topic-create-submit" tabindex="4" class="btn btn-primary create">Create Topic</button>\r\n                        <a style="cursor:pointer" id="submit_cancel" class="cancel" tabindex="4">cancel</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</script>'}),define("text!template/topic-list-main-template.bhtml",[],function(){return'<script type="text/template" id="topic-list-main-template">\r\n<div class="ember-view">\r\n    <div id="list-controls">\r\n        <div class="container">\r\n            <ul class="nav nav-pills" id="category-filter">\r\n                <li class="ember-view" id="topic-filter-latest" title="the most recent topics">\r\n                    <a href="/discourse/latest">Latest</a>\r\n                </li>\r\n                <li class="ember-view" id="topic-filter-category" title="the most recent topics">\r\n                    <a href="/discourse/c">Cagetories</a>\r\n                </li>\r\n            </ul>\r\n            <button class="btn btn-default" id="btn-create-new-topic">\r\n                <i class="icon icon-plus"></i>Create Topic\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="container" id="d-container">\r\n    </div>\r\n</div>\r\n</script>'}),define("controller/category",["storage/appStorage","model/Topic","collection/TopicCollection","view/TopicListMain","view/TopicListContainer","view/TopicListTableRow","view/TopicCreate","text!template/topic-list-container-template.bhtml","text!template/topic-list-table-row-template.bhtml","text!template/topic-create-template.bhtml","text!template/topic-list-main-template.bhtml"],function(e,t,n,r,i,s,o,u,a,f,l){return{page:null,topicCreateView:null,more:function(){console.log("request data"),$.ajax({url:"/discourse/topic/"+e.currentCategory.get("id")+"/"+this.page*20+"/20",type:"GET",async:!1,success:function(e){var t=require("storage/appStorage"),n=require("model/Topic"),r=require("view/TopicListTableRow");e=JSON.parse(e);if(typeof e.err_msg!="undefined"){console.log(e.err_msg),$(window).unbind("scroll");return}_.each(e,function(e){var i=new n(e);t.topics.add(i);var s=new r({model:i})}),require("controller/category").page++}})},star:function(e){$.ajax({url:"/discourse/star/"+topicId,type:"PUT",contentType:"application/json",data:{starred:e},async:!1,success:function(e){var t=require("storage/appStorage");e=JSON.parse(e),e.err_msg?console.log(e.err_msg):(t.topics.get(e.topic_id).set("starred",e.starred),t.topics.get(e.topic_id).get("starred"))}})},createTopic:function(e,t,n){$.ajax({url:"/discourse/topic",type:"POST",data:{title:e,content_raw:t,category_id:n},async:!1,success:function(e){var t=require("storage/appStorage"),n=require("model/Topic"),r=require("view/TopicListTableRow");e=JSON.parse(e);if(!e.err_msg){$("#reply-control").remove();var i=new n(e);i.set("newCreated",!0);if(i.get("category_id")===t.currentCategory.get("id")){t.topics.add(i);var s=new r({model:i})}}else console.log(e.err_msg)}})},run:function(i){console.log("running category.js"),e.templates.topicListContainerTemplate=$(u).html(),e.templates.topicListTableRowTemplate=$(a).html(),e.templates.topicCreateTemplate=$(f).html(),e.templates.topicListMainTemplate=$(l).html(),e.topics=new n,PreloadStore.data?(_.each(PreloadStore.data.topics,function(n){var r=new t(n);e.topics.add(r)}),PreloadStore.data=null):(console.log("request for data"),$.ajax({url:"/discourse/c/"+i+".json",type:"GET",async:!1,success:function(e){e=JSON.parse(e);var t=require("storage/appStorage"),n=require("model/Topic");t.topics.reset(),_.each(e,function(e){var r=new n(e);t.topics.add(r)})}})),e.currentCategory=e.categories.get(e.topics.models[0].get("category_id")),$("#main-outlet").empty();var s=new r;this.page=1,$(window).unbind("scroll"),$(window).bind("scroll",function(){$(window).scrollTop()+$(window).height()>=$(document).height()&&require("controller/category").more()})}}}),define("model/Post",[],function(){return Backbone.Model.extend({initialize:function(){}})}),define("collection/PostCollection",["model/Post"],function(e){return Backbone.Collection.extend({model:e})}),define("view/PostCreate",["storage/appStorage"],function(e){return Backbone.View.extend({el:$("#main"),initialize:function(){},events:{"click #create-post-toggler":"closeCreateWindow","click #submit_cancel":"closeCreateWindow","click #btn-post-create-submit":"submit"},submit:function(){this.model.get("title")?this.variables=this.getTopicModelVariables(this.model):this.variables=this.getPostModelVariables(this.model),this.variables.content=CKEDITOR.instances.editor2.getData(),console.log(this.variables),variables.content.length!==0?this.variables.title?$.ajax({url:"/discourse/post",type:"POST",data:{raw:this.variables.content,topic_id:this.variables.topic_id},async:!1,success:function(e){e=JSON.parse(e),e.err_msg?console.log(e.err_msg):($("#reply-control").remove(),window.location.reload())}}):$.ajax({url:"/discourse/post",type:"POST",data:{raw:this.variables.content,topic_id:this.variables.topic_id,reply_to_post_id:this.variables.post_id},async:!1,success:function(e){e=JSON.parse(e),e.err_msg?console.log(e.err_msg):($("#reply-control").remove(),window.location.reload())}}):console.log("invalid input")},closeCreateWindow:function(){$("#reply-control").remove()},render:function(){this.model.get("title")?this.variables=this.getTopicModelVariables(this.model):this.variables=this.getPostModelVariables(this.model);var t=_.template(e.templates.postCreateTemplate,this.variables);this.$el.append(t),CKEDITOR.replace("editor2")},getPostModelVariables:function(t){return variables={post_id:t.get("id"),topic_id:t.get("topic_id"),post_number:t.get("post_number"),userInfo:e.users.get(t.get("user_id"))}},getTopicModelVariables:function(e){return variables={title:e.get("title"),topic_id:e.get("id")}}})}),define("view/PostReference",["storage/appStorage"],function(e){return Backbone.View.extend({initialize:function(){},events:{},render:function(){var t=this.getVariables(this.model),n=_.template(e.templates.postReferenceTemplate,t);this.$el.append(n)},getVariables:function(t){return variables={id:t.get("id"),topic_id:t.get("topic_id"),user_id:t.get("user_id"),raw:t.get("raw"),reply_count:t.get("reply_count"),like_count:t.get("like_count"),time_updated:t.get("time_updated"),time_created:t.get("time_created"),cooked:t.get("cooked"),reply_to_post_number:t.get("reply_to_post_number"),time_from_created:t.get("time_from_created"),userInfo:e.users.get(t.get("user_id"))}}})}),define("view/PostReplyRow",["storage/appStorage"],function(e){return Backbone.View.extend({initialize:function(){this.render()},events:{},render:function(){var t=this.getVariables(this.model),n=_.template(e.templates.postReplyRowTemplate,t);this.$el.append(n)},getVariables:function(t){return variables={id:t.get("id"),topic_id:t.get("topic_id"),user_id:t.get("user_id"),raw:t.get("raw"),reply_count:t.get("reply_count"),like_count:t.get("like_count"),time_updated:t.get("time_updated"),time_created:t.get("time_created"),cooked:t.get("cooked"),reply_to_post_number:t.get("reply_to_post_number"),time_from_created:t.get("time_from_created"),userInfo:e.users.get(t.get("user_id"))}}})}),define("view/PostReplyContainer",["storage/appStorage","view/PostReplyRow"],function(e,t){return Backbone.View.extend({initialize:function(){this.id=this.model.get("id")},events:{},render:function(){$("#post-"+this.id+"-body").removeClass("bottom-round");var t=_.template(e.templates.postReplyContainerTemplate,{id:this.id});this.$el.after(t)},displayReplies:function(e,n){_.each(e,function(e){var r=new t({el:$("#post-"+n+"-reply-container"),model:e})})}})}),define("view/PostRow",["storage/appStorage","view/PostCreate","view/PostReference","view/PostReplyContainer"],function(e,t,n,r){return Backbone.View.extend({className:"ember-view topic-post clearfix regular",initialize:function(){this.render()},events:{"click button[name='reply-post']":"showReplyWindow","click button[name='post-reply-toggler']":"toggleReply","click a[name='post-reference-toggler']":"toggleReference","click button[name='btn-bookmark']":"bookmark","click button[name='btn-like']":"like","click a[name='post-unlike']":"unlike"},showReplyWindow:function(n){if($("#reply-control").length===0){var r=require("controller/topic");r.postCreateView=r.postCreateView||new t,r.postCreateView.model=e.posts.get(n.currentTarget.value),r.postCreateView.render()}},render:function(){var t=this.getVariables(this.model);this.$el.html(_.template(e.templates.postRowTemplate,t)),$("#post-row-container").append(this.$el)},toggleReference:function(t){var n=t.currentTarget.getAttribute("value"),r=e.posts.get(n).get("reply_to_post_id");$("#post-"+n+"-reference-container").children().length===0?(require("controller/topic").getReferenedPost(r,n),$("#post-"+n).addClass("replies-above")):($("#post-"+n+"-reference-container").empty(),$("#post-"+n).removeClass("replies-above"))},displayReference:function(e){(new n({el:$("#post-"+this.model.get("id")+"-reference-container"),model:e})).render()},toggleReply:function(t){var n=t.currentTarget.value,i=e.posts.get(n);$("#post-"+n+"-reply-container").length===0?typeof i.get("replyContainerView")=="undefined"?(e.posts.get(n).set("replyContainerView",new r({el:$("#post-"+n+"-body"),model:i})),i.get("replyContainerView").render(),require("controller/topic").getReplyPost(n)):(i.get("replyContainerView").$el=$("#post-"+n+"-body"),i.get("replyContainerView").model=i,i.get("replyContainerView").render(),require("controller/topic").getReplyPost(n)):($("#post-"+n+"-reply-container").remove(),$("#post-"+n+"-body").addClass("bottom-round"))},getVariables:function(t){return variables={id:t.get("id"),topic_id:t.get("topic_id"),user_id:t.get("user_id"),raw:t.get("raw"),reply_count:t.get("reply_count"),like_count:t.get("like_count"),time_updated:t.get("time_updated"),time_created:t.get("time_created"),cooked:t.get("cooked"),reply_to_post_id:t.get("reply_to_post_id"),time_from_created:t.get("time_from_created"),is_liked:t.get("isLiked"),is_bookmarked:t.get("isBookmarked"),userInfo:e.users.get(t.get("user_id")),appStorage:e}},like:function(e){var t=1;$.ajax({url:"/discourse/postAction",type:"POST",data:{post_id:e.currentTarget.value,post_action_type_id:2,status:t},async:!1,success:function(e){e=JSON.parse(e),console.log(e),typeof e.postAction.post_action_type_id!="undefined"&&($("button#btn-like-"+e.postAction.post_id).css("display","none"),$("span#post-like-count-"+e.postAction.post_id).html(e.post.like_count),$("a#post-unlike-"+e.postAction.post_id).css("display","inline"),$("div#like-status-"+e.postAction.post_id).css("display","inline"))}})},unlike:function(e){var t=e.currentTarget.getAttribute("value"),n=0;$.ajax({url:"/discourse/postAction",type:"POST",data:{post_id:t,post_action_type_id:2,status:n},async:!1,success:function(e){e=JSON.parse(e),console.log(e),typeof e.postAction.post_action_type_id=="undefined"&&($("button#btn-like-"+e.postAction.post_id).css("display","inline"),$("a#post-unlike-"+e.postAction.post_id).css("display","none"),$("span#post-like-count-"+e.postAction.post_id).html(e.post.like_count),e.post.like_count>0?$("div#like-status-"+e.postAction.post_id).css("display","inline"):$("div#like-status-"+e.postAction.post_id).css("display","none"))}})},bookmark:function(e){var t;$(e.currentTarget).find("i").hasClass("icon-bookmark")?t=0:t=1,$.ajax({url:"/discourse/postAction",type:"POST",data:{post_id:e.currentTarget.value,post_action_type_id:1,status:t},async:!1,success:function(e){e=JSON.parse(e),typeof e.postAction.post_action_type_id=="undefined"?$("button[name='btn-bookmark'][value="+e.postAction.post_id+"] i").removeClass().addClass("icon-bookmark-empty"):$("button[name='btn-bookmark'][value="+e.postAction.post_id+"] i").removeClass().addClass("icon-bookmark")}})}})}),define("view/TopicMain",["storage/appStorage","view/PostRow","view/PostCreate"],function(e,t,n){return Backbone.View.extend({el:$("#main-outlet"),events:{"click button#btn-reply-to-topic":"showCreatePostWindow"},initialize:function(){this.render(),e.posts.each(function(e){e.set("view",new t({model:e,id:"post-"+e.get("id"),attributes:{identity:e.get("id")}}))})},render:function(){var t=this.getVariables(e.currentTopic);this.$el.append(_.template(e.templates.topicMainTemplate,t))},getVariables:function(e){return variables={title:e.get("title"),id:e.get("id"),like_count:e.get("like_count"),posts_count:e.get("posts_count"),time_created:e.get("time_created"),category_id:e.get("category_id"),views:e.get("views")}},showCreatePostWindow:function(){if($("#reply-control").length===0){var t=require("controller/topic");t.postCreateView=t.postCreateView||new n,t.postCreateView.model=e.currentTopic,t.postCreateView.render()}}})}),define("text!template/topic-main-template.bhtml",[],function(){return'<script type="text/template" id="topic-main-template">\r\n<div class="ember-view regular">\r\n    <div id="topic-title">\r\n        <div class="container">\r\n            <div class="inner">\r\n                <a class="star" href="#" title="add this topic to your favorites list"></a>\r\n                <h1>\r\n                    <a href="/t/replay-as-topic/6"><%= title %></a>\r\n                    <a href="#" class="edit-topic" title="edit the title and category of this topic">\r\n                        <i class="icon-pencil"></i>\r\n                    </a>\r\n                </h1>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="container posts">\r\n        <div id="selected-posts" class="ember-view hidden"></div>\r\n        <div class="row">\r\n            <section class="topic-area" id="topic">\r\n                <div class="posts-wrapper">\r\n<!--- \r\n                    <div id="topic-progress-wrapper">\r\n                        <nav id="topic-progress" title="topic progress">\r\n                            <button id="jump-top" title="jump to first post" disabled="disabled">\r\n                                <i class="icon-circle-arrow-up"></i>\r\n                            </button>\r\n                            <div class="nums">\r\n                                <h4 title="current post">1</h4>\r\n                                <span>of</span>\r\n                                <h4 title="current post">3</h4>\r\n                            </div>\r\n                            <button id="jump-bottom" title="jump to last post">\r\n                                <i class="icon-circle-arrow-down"></i>\r\n                            </button>\r\n                            <div class="bg" style="border-right-width: 1px; width: 43.33333333333333px;">&nbsp;</div>\r\n                        </nav>\r\n                    </div>\r\n-->\r\n                    <div class="ember-view" id="post-row-container">\r\n                    </div>\r\n\r\n                </div>\r\n                <div id="topic-footer-buttons" class="ember-view">\r\n                    <button class="ember-view btn standard" title="send invitations to friends so they can reply to this topic with a single click">\r\n                        <i class="icon icon-group"></i>Invite Friends to Reply\r\n                    </button>\r\n                    <button class="ember-view btn standard" title="add this topic to your favorites list">\r\n                        <i class="icon-star undefined"></i>Favorite\r\n                    </button>\r\n                    <button class="ember-view btn standard" title="share a link to this topic">\r\n                        <i class="icon icon-share"></i>Share\r\n                    </button>\r\n                    <button class="ember-view btn standard hidden" title="Clear the pinned status of this topic so it no longer appears at the top of your topic list">\r\n                        <i class="icon icon-pushpin"></i>Clear pin\r\n                    </button>\r\n                    <button id="btn-reply-to-topic" class="ember-view btn btn-primary create standard" title="begin composing a reply to this topic">\r\n                        <i class="icon icon-plus"></i>Reply\r\n                    </button>\r\n                    <div class="ember-view btn-group">\r\n                        <h4 class="title"></h4>\r\n                        <button class="btn standard dropdown-toggle">Regular<span class="caret"></span></button>\r\n                        <ul class="dropdown-menu">\r\n                            <li data-id="3">\r\n                                <a href="#">\r\n                                    <span class="title">Watching</span>\r\n                                    <span>same as Tracking, plus you will be notified of all new posts.</span>\r\n                                </a>\r\n                            </li>\r\n                            <li data-id="2">\r\n                                <a href="#">\r\n                                    <span class="title">Tracking</span>\r\n                                    <span>you will be notified of unread posts, @name mentions, and replies to your posts.</span>\r\n                                </a>\r\n                            </li>\r\n                            <li data-id="1">\r\n                                <a href="#">\r\n                                    <span class="title">Regular</span>\r\n                                    <span>you will be notified only if someone mentions your @name or replies to your post.</span>\r\n                                </a>\r\n                            </li>\r\n                            <li data-id="0">\r\n                                <a href="#">\r\n                                    <span class="title">Muted</span>\r\n                                    <span>you will not be notified of anything about this topic, and it will not appear on your unread tab.</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                        <p>You will be notified only if someone mentions your @name or replies to your post.</p>\r\n                    </div>\r\n                </div>\r\n                <!--<div id="suggested-topics"></div>-->\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n</script>'}),define("text!template/post-row-template.bhtml",[],function(){return'<script type="text/template" id="post-row-template">\r\n    <div id="post-<%= id %>-reference-container" class="row"></div>\r\n    <article class="boxed" id="post_1">\r\n        <div class="row">\r\n            <div class="read-icon seen" title=""></div>\r\n            <% if( reply_to_post_id ) { %>\r\n                <a id="post-<%= id %>-reference-toggler" name="post-reference-toggler" value="<%= id %>" style="cursor:pointer" data-ember-action="1678" class="reply-to-tab">\r\n                in reply to<img width="20" height="20" src="https://www.gravatar.com/avatar/<%= appStorage.users.get(appStorage.posts.get(reply_to_post_id).get(\'user_id\')).get(\'avatar\') %>.png?s=20&r=pg&d=identicon" class="avatar " title="<%= appStorage.users.get(appStorage.posts.get(reply_to_post_id).get(\'user_id\')).get(\'name\') %>">\r\n                <%= appStorage.users.get(appStorage.posts.get(reply_to_post_id).get(\'user_id\')).get(\'name\') %></a>\r\n            <% } %>\r\n\r\n            <div class="topic-meta-data span2">\r\n                <div class="contents">\r\n                    <a href="/discourse/u/<%= user_id %>">\r\n                        <img width="45" height="45" src="https://www.gravatar.com/avatar/<%= userInfo.get(\'avatar\') %>.png?s=45&r=pg&d=identicon" class="avatar" title="<%= userInfo.get(\'name\') %>" />\r\n                    </a>\r\n                    <h3 class="moderator">\r\n                        <a href="/discourse/u/<%= user_id %>"><%= userInfo.get(\'name\') %></a>\r\n                    </h3>\r\n                    <div class="post-info">\r\n                        <a href="#" class="post-date">\r\n                            <span class="date" title="<%= time_created %>"><%= time_from_created %></span>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="topic-body span14">\r\n                <div id="post-<%= id %>-body" class="<% if( reply_to_post_id ) { %>avoid-tab <% } %>bottom-round contents regular">\r\n                    <div class="ember-view"></div>\r\n                    <div class="ember-view cooked">\r\n                        <%= raw %>\r\n                    </div>\r\n                    <section class="ember-view post-menu-area clearfix">\r\n                        <% if (reply_count > 0) { %>\r\n                            <button name="post-reply-toggler" class="show-replies" value="<%= id %>"><span class="badge-posts"><%= reply_count %></span>Replies<i class="icon icon-chevron-down"></i></button>\r\n                        <% } %>\r\n                        <nav class="post-controls">\r\n                            <button id="btn-like-<%= id %>" name="btn-like" value="<%= id %>" style="display:<% if (typeof is_liked !== \'undefined\') { %>none<% } else { %>inline<% } %>" title="like this post" class="like">\r\n                                <i class="icon-heart"></i>\r\n                            </button><button title="flag this post for attention or send a notification about it">\r\n                                <i class="icon-flag"></i>\r\n                            </button><button title="share a link to this post">\r\n                                <i class="icon-link"></i>\r\n                            </button><button name="btn-bookmark" value="<%= id %>" title="bookmark this post to your user page">\r\n                                <% if (typeof is_bookmarked === \'undefined\') { %>\r\n                                    <i class="icon-bookmark-empty"></i>\r\n                                <% } else { %>\r\n                                    <i class="icon-bookmark"></i>\r\n                                <% } %>\r\n                            </button><button name="reply-post" value="<%= id %>" title="begin composing a reply to this post">\r\n                                <i class="icon-reply"></i> Reply\r\n                            </button>\r\n                        </nav>\r\n                    </section>\r\n                </div>\r\n                <section class="ember-view post-actions">\r\n                    <div id="like-status-<%= id %>" value="<%= id %>" style="display:<% if (like_count <= 0 ) { %>none<% } else { %>inline<% } %>" class="post-action">\r\n                        <a id="post-like-toggler-<%= id %>" value="<%= id %>" style="cursor:default"><span id="post-like-count-<%= id %>"><%= like_count %></span> people liked this.</a>\r\n                        <a id="post-unlike-<%= id %>" name="post-unlike" value="<%= id %>" style="cursor:pointer;display:<% if (typeof is_liked === \'undefined\') { %>none<% } else { %>inline<% } %>" >Undo like.</a>\r\n                    </div>\r\n                </section>\r\n                <!--<div class="ember-view topic-summary"></div>-->\r\n            </div>\r\n        </div>\r\n    </article>\r\n</script>'}),define("text!template/post-create-template.bhtml",[],function(){return'<script type="text/template" id="post-create-template">\r\n    <!--- class="ember-view processed closed" ---->\r\n    <!--- class="ember-view processed open show-preview" ---->  \r\n    <div id="reply-control" class="ember-view processed open show-preview" style="height: 363px;">\r\n        <div class="grippie"></div>\r\n        <div class="spinner">Uploading...</div>\r\n        <div class="contents">\r\n            <div class="control">\r\n                <a href="#" class="toggler" title="toggle" id="create-post-toggler"></a>\r\n                <div class="control-row reply-area">\r\n                    <% if (typeof title === \'undefined\') { %>\r\n                        <div class="reply-to">Replying to <a href="/discourse/t/<%= topic_id %>/<%= post_number %>">post <%= post_number %></a> by <img width="20" height="20" src="https://www.gravatar.com/avatar/<%= userInfo.get(\'avatar\') %>.png?s=20&r=pg&d=identicon" class="avatar " title=""> <%= userInfo.get(\'name\') %>:</div>\r\n                    <% } else { %>\r\n                        <div class="reply-to">Replying to <a href="/discourse/t/<%= topic_id %>"> <%= title %></a>:</div>\r\n                    <% } %>\r\n                    <div class="textarea-wrapper">\r\n                        <textarea id="editor2" class="ckeditor ember-view ember-text-area" placeholder="Type your reply here. Use Markdown or BBCode to format. Drag or paste an image here to upload it." tabindex="3"></textarea>\r\n                    </div>\r\n                    <div class="submit-panel">\r\n                        <!--\r\n                        <button tabindex="4" disabled="disabled" class="btn btn-primary create">Reply</button>\r\n                        -->\r\n                        <button tabindex="4" id="btn-post-create-submit" class="btn btn-primary create">Reply</button>\r\n                        <a style="cursor:pointer" id="submit_cancel" class="cancel" tabindex="4">cancel</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</script>\r\n'}),define("text!template/post-reply-container-template.bhtml",[],function(){return'<script type="text/template" id="post-reply-container-template">\r\n<section id="post-<%= id %>-reply-container" class="ember-view replies-list embedded-posts bottom" style="display: block;">\r\n\r\n</section>\r\n</script>'}),define("text!template/post-reply-row-template.bhtml",[],function(){return'<script type="text/template" id="post-reply-row-template">\r\n<div id="ember7870" class="ember-view reply">\r\n    <div class="row">\r\n        <div class="topic-meta-data span2">\r\n            <div class="contents">\r\n                <div>\r\n                    <a href="/discourse/u/<%= user_id %>">\r\n                        <img width="25" height="25" src="https://www.gravatar.com/avatar/<%= userInfo.get(\'avatar\') %>.png?s=25&amp;r=pg&amp;d=identicon" class="avatar " title="<%= userInfo.get(\'name\') %>">\r\n                    </a>\r\n                </div>\r\n                <h5>\r\n                    <a href="/discourse/u/<%= user_id %>"><%= userInfo.get(\'name\') %></a>\r\n                </h5>\r\n                <span class="post-date">\r\n                    <span class="date" title="<%= time_created %>"><%= time_from_created %></span>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div class="span11 topic-body">\r\n            <%= raw %>\r\n            <a href="/discourse/t/<%= topic_id %>#" class="arrow" title="jump to later reply">\r\n                <i class="icon icon-arrow-down"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>\r\n</script>'}),define("text!template/post-reference-template.bhtml",[],function(){return'<script type="text/template" id="post-reference-template">\r\n<section class="embedded-posts top parent-post span14 offset2" style="">\r\n    <div id="ember10909" class="ember-view reply">\r\n        <div class="row">\r\n            <div class="topic-meta-data span2">\r\n                <div class="contents">\r\n                    <div>\r\n                        <a href="/discourse/u/<%= user_id %>"">\r\n                        <img width="25" height="25" src="https://www.gravatar.com/avatar/<%= userInfo.get(\'avatar\') %>.png?s=25&amp;r=pg&amp;d=identicon" class="avatar " title="<%= userInfo.get(\'name\') %>"></a>\r\n                    </div>\r\n                    <h5>\r\n                        <a href="/discourse/u/<%= user_id %>""><%= userInfo.get(\'name\') %></a>\r\n                    </h5>\r\n                    <span class="post-date">\r\n                        <span class="date" title="<%= time_created %>"><%= time_from_created %></span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="span11 topic-body">\r\n                <a href="/discourse/t/<%= topic_id %>#" class="arrow" title="jump to earlier reply">\r\n                    <i class="icon icon-arrow-up"></i>\r\n                </a>\r\n                <%= raw %>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n</script>'}),define("controller/topic",["storage/appStorage","model/User","model/Topic","model/Post","collection/PostCollection","view/TopicMain","text!template/topic-main-template.bhtml","text!template/post-row-template.bhtml","text!template/post-create-template.bhtml","text!template/post-reply-container-template.bhtml","text!template/post-reply-row-template.bhtml","text!template/post-reference-template.bhtml"],function(e,t,n,r,i,s,o,u,a,f,l,c){return{page:null,postCreateView:null,getReferenedPost:function(e,t){console.log(t),$.ajax({url:"/discourse/post/"+e,type:"GET",async:!1,success:function(e){e=JSON.parse(e);if(!e.err_msg){var n=require("model/User"),r=require("model/Post"),i=require("storage/appStorage");i.users.add(new n(e.user));var s=new r(e.post);i.posts.add(s),i.posts.get(t).get("view").displayReference(s)}else console.log(e.err_msg)}})},getReplyPost:function(e){$.ajax({url:"/discourse/postReply/"+e+"/0/50",type:"GET",async:!1,success:function(t){t=JSON.parse(t);if(!t.err_msg){var n=[],r=require("model/User"),i=require("model/Post"),s=require("storage/appStorage");_.each(t.users,function(e){s.posts.add(new r(e))}),_.each(t.posts,function(e){var t=new i(e);s.posts.add(t),n.push(t)}),s.posts.get(e).get("replyContainerView").displayReplies(n,e)}else console.log(t.err_msg)}})},more:function(){console.log("request data"),$.ajax({url:"/discourse/post/"+e.currentTopic.get("id")+"/"+require("controller/topic").page*20+"/20",type:"GET",async:!1,success:function(t){t=JSON.parse(t);if(typeof t.err_msg!="undefined"){console.log(t.err_msg),$(window).unbind("scroll");return}console.log(t);var n=require("model/User"),r=require("model/Post"),i=require("view/PostRow");_.each(t.users,function(t){e.users.add(new n(t))}),_.each(t.posts,function(t){var n=new r(t);n.set("view",new i({model:n,id:"post-"+n.get("id"),attributes:{identity:n.get("id")}})),e.posts.add(n)}),require("controller/topic").page++}})},run:function(h){console.log("running topic.js"),e.templates.topicMainTemplate=$(o).html(),e.templates.postRowTemplate=$(u).html(),e.templates.postCreateTemplate=$(a).html(),e.templates.postReplyContainerTemplate=$(f).html(),e.templates.postReplyRowTemplate=$(l).html(),e.templates.postReferenceTemplate=$(c).html(),PreloadStore.data?(e.currentTopic=new n(PreloadStore.data.topic),e.posts=new i,_.each(PreloadStore.data.postsAndUsers.users,function(n){e.users.add(new t(n))}),_.each(PreloadStore.data.postsAndUsers.posts,function(t){e.posts.add(new r(t))}),PreloadStore.data=null):(console.log("request for data"),$.ajax({url:"/discourse/t/"+h+".json",type:"GET",async:!1,success:function(e){var t=require("storage/appStorage"),n=require("model/User"),r=require("model/Topic"),i=require("model/Post"),s=require("collection/PostCollection");e=JSON.parse(e),t.currentTopic=new r(e.topic),"undefined"==typeof t.posts?t.posts=new s:t.posts.reset(),_.each(e.postsAndUsers.users,function(e){t.users.add(new n(e))}),_.each(e.postsAndUsers.posts,function(e){t.posts.add(new i(e))})}})),$("#main-outlet").empty(),new s,this.page=1,$(window).unbind("scroll"),$(window).bind("scroll",function(){$(window).scrollTop()+$(window).height()>=$(document).height()&&require("controller/topic").more()})}}}),define("view/UserActionRow",["storage/appStorage"],function(e){return Backbone.View.extend({initialize:function(e){this.actionData=e,this.render()},render:function(){$("#user-stream").append(_.template(e.templates.userActionRowTemplate,this.actionData))}})}),define("view/UserMain",["storage/appStorage","view/UserActionRow"],function(e,t){return Backbone.View.extend({el:$("#main-outlet"),events:{"click li.filter":"showItems"},initialize:function(e){this.userData=e,this.render(),this.showItems(5)},render:function(){this.$el.html(_.template(e.templates.userMainTemplate,this.userData))},getVariables:function(){return{}},showItems:function(t){var n;typeof t!="object"?n=t:n=t.currentTarget.value,_.each($(".filter"),function(e){$(e).removeClass("active")}),$(".filter[value="+n+"]").addClass("active"),$.ajax({url:"/discourse/userAction/"+e.targetUser.id+"/"+n+"/1",type:"GET",async:!1,success:function(e){var t=require("view/UserActionRow");e=JSON.parse(e),$("#user-stream").empty(),_.each(e,function(e){var n=new t(e)})}})}})}),define("text!template/user-main-template.bhtml",[],function(){return'<script type="text/template" id="user-main-template">\r\n  <div id="ember1686" class="ember-view">\r\n    <div class="user-heading">\r\n      <div class="container">\r\n        <div class="full-width" id="user-menu">\r\n          <h1><%= name %><!--<span>forumadmin</span>--></h1>\r\n          <button data-ember-action="237" class="btn">Log Out</button>\r\n          <a href="/admin/users/forumadmin" class="btn"><i class="icon-wrench"></i>&nbsp;Admin</a>\r\n          <ul class="nav nav-pills">\r\n            <li>\r\n              <a id="ember1758" class="ember-view active" href="/users/forumadmin">Activity</a>\r\n            </li>\r\n            <li>\r\n              <a id="ember1760" class="ember-view" href="/users/forumadmin/private-messages">Messages</a>\r\n            </li>\r\n            <li>\r\n              <a id="ember1761" class="ember-view" href="/users/forumadmin/invited">Invites</a>\r\n            </li>\r\n            <li>\r\n              <a id="ember1763" class="ember-view" href="/users/forumadmin/preferences">Preferences</a>\r\n            </li>\r\n          </ul>\r\n          <div class="avatar-wrapper">\r\n            <img width="120" height="120" src="https://www.gravatar.com/avatar/<%= avatar %>.png?s=120&amp;r=pg&amp;d=identicon" class="avatar" title="<%= name %>">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="container">\r\n      <div class="user-info clearfix">\r\n         <div class="about-me">\r\n           <div class="missing-profile">the About Me field of your profile is currently blank, <a href="/users/forumadmin/preferences">would you like to fill it out?</a></div>\r\n         </div>\r\n      </div>\r\n    </div>\r\n    <div class="container">\r\n      <div id="ember1739" class="ember-view">\r\n        <div id="user-info"> \r\n          <nav class="buttons">\r\n            <a id="ember1771" class="ember-view btn" href="/users/forumadmin/preferences">Edit Preferences</a><br>\r\n          </nav>\r\n          <div class="clearfix">\r\n          </div>\r\n          <ul class="action-list nav-stacked side-nav">\r\n            <% if (typeof actionCount.star === \'undefined\') { actionCount.star = 0 } %>\r\n            <li name="filter" value="4" class="filter ember-view active"><a style="hover:pointer">Favorites <span class="count">(<%= actionCount.star %>)</span><span class="icon-chevron-right"></span></a></li>\r\n            <% if (typeof actionCount.star !== \'undefined\' && actionCount.bookmark > 0) { %>\r\n              <li name="filter" value="1" class="filter ember-view"><a style="hover:pointer">Bookmarks <span class="count">(<%= actionCount.bookmark %>)</span><span class="icon-chevron-right"></span></a></li>\r\n            <% } %>\r\n            <% if (typeof actionCount.star === \'undefined\') { actionCount.topic = 0 } %>\r\n            <li name="filter" value="5" class="filter ember-view"><a style="hover:pointer">Topics <span class="count">(<%= actionCount.topic %>)</span><span class="icon-chevron-right"></span></a></li>\r\n            <% if (typeof actionCount.star === \'undefined\') { actionCount.post = 0 } %>\r\n            <li name="filter" value="6" class="filter ember-view"><a style="hover:pointer">Posts <span class="count">(<%= actionCount.post %>)</span><span class="icon-chevron-right"></span></a></li>\r\n            <% if (typeof actionCount.star !== \'undefined\' && actionCount.response > 0) { %>\r\n              <li name="filter" value="7" class="filter ember-view"><a style="hover:pointer">Responses <span class="count">(<%= actionCount.response %>)</span><span class="icon-chevron-right"></span></a></li>\r\n            <% } %>\r\n            <% if (typeof actionCount.star !== \'undefined\' && actionCount.like > 0) { %>\r\n              <li name="filter" value="2" class="filter ember-view"><a style="hover:pointer">Likes Given <span class="count">(<%= actionCount.like %>)</span><span class="icon-chevron-right"></span></a></li>\r\n            <% } %>\r\n            <% if (typeof actionCount.star !== \'undefined\' && actionCount.like_receive > 0) { %>\r\n              <li name="filter" value="3" class="filter ember-view"><a style="hover:pointer">Likes Received <span class="count">(<%= actionCount.like_receive %>)</span><span class="icon-chevron-right"></span></a></li>\r\n            <% } %>\r\n\r\n          </ul>\r\n          <div class="show">\r\n            <dl>\r\n              <dt>Created At:</dt><dd><span class="date" title="March 21, 2013 6:43am"><%= time_created %></span></dd>\r\n              <dt>Last Post:</dt><dd><span class="date" title="May 29, 2013 2:24pm"><%= time_last_posted %></span></dd>\r\n              <dt>Last Seen:</dt><dd><span class="date" title="<%= time_last_seen %>"><%= time_from_last_seen %></span></dd>\r\n              <dt>Email:</dt><dd title="<%= email %>"><%= email %></dd>\r\n              <dt>Trust Level:</dt><dd>visitor</dd>\r\n            </dl>\r\n          </div>\r\n        </div>\r\n        <div id="ember1806" class="ember-view">\r\n          <div id="user-stream">\r\n          </div>\r\n        </div>\r\n        <div id="user-stream-bottom"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</script>'}),define("text!template/user-action-row-template.bhtml",[],function(){return'<script type="text/template" id="user-action-row-template">\r\n  <div class="item">\r\n    <div class="clearfix info">\r\n      <a href="/discourse/u/<%= post_user_id %>" class="avatar-link"><div class="avatar-wrapper"><img width="45" height="45" src="https://www.gravatar.com/avatar/<%= post_user_avatar %>.png?s=45&amp;r=pg&amp;d=identicon" class="avatar actor" title="<%= post_user_name %>"></div></a>\r\n      <span class="time"><span class="relative-date date" title="<%= time_created %>" data-format="medium-with-ago"><%= time_created %></span></span>\r\n      <span class="title">\r\n          <a href="/discourse/t/<%= topic_id %>"><%= topic_title %></a>\r\n      </span>\r\n      <span class="type">\r\n        <% if (action_type === \'response\') { %>\r\n          Replied by\r\n        <% } else {%>\r\n          Posted by\r\n        <% } %>\r\n        <a href="/discourse/u/<%= post_user_id %>"><%= post_user_name %></a>\r\n      </span>\r\n    </div>\r\n    <p class="excerpt"><%= post_raw %></p>\r\n    <% if (action_type === \'bookmark\' || action_type === \'like\' || action_type === \'star\') { %>\r\n      <div class="child-actions">\r\n        <% if (action_type === \'bookmark\') { %>\r\n          <i class="icon icon-bookmark"></i>\r\n        <% } else if (action_type === \'like\') { %>\r\n          <i class="icon icon-heart"></i>\r\n        <% } else if (action_type === \'star\') { %>\r\n          <i class="icon icon-star"></i>\r\n        <% } %>\r\n        <a href="/discourse/u/<%= action_user_id %>" class="avatar-link"><div class="avatar-wrapper"><img width="20" height="20" src="https://www.gravatar.com/avatar/<%= action_user_avatar %>.png?s=20&amp;r=pg&amp;d=identicon" class="avatar actor" title="<%= action_user_name %>"></div></a>\r\n    </div>\r\n    <% } %>\r\n  </div>\r\n</script>'}),define("controller/user",["storage/appStorage","view/UserMain","view/UserActionRow","text!template/user-main-template.bhtml","text!template/user-action-row-template.bhtml"],function(e,t,n,r,i){return{run:function(n){console.log("running user.js"),e.templates.userMainTemplate=$(r).html(),e.templates.userActionRowTemplate=$(i).html(),PreloadStore.data?(e.targetUser=PreloadStore.data.userData,e.targetUser.actionCount=PreloadStore.data.userActionCountData,PreloadStore.data=null):(console.log("request for data"),$.ajax({url:"/discourse/u/"+n+".json",type:"GET",async:!1,success:function(e){var t=require("storage/appStorage");e=JSON.parse(e),t.targetUser=e.userData,t.targetUser.actionCount=e.userActionCountData}})),$("#main-outlet").empty(),new t(e.targetUser)}}}),require.config({baseUrl:$("meta[name=requireBase]").attr("content")}),require(["storage/appStorage","router/Router","model/User","model/Category","collection/UserCollection","collection/CategoryCollection","controller/header","controller/categoryList","controller/category","controller/topic","controller/user"],function(e,t,n,r,i,s,o,u,a,f,l){e.user=new n(PreloadStore.data.user),e.categories=new s,e.users=new i,_.each(PreloadStore.data.categories,function(t){e.categories.add(new r(t))}),e.templates={},pjax=1,typeof window.history.pushState=="undefined"&&(pjax=0);if(pjax){router=new t;var c="/discourse/";Backbone.history.start({pushState:!0,root:c,silent:!0}),$(document).on("click","a[href]:not([data-bypass])",function(e){var t={prop:$(this).prop("href"),attr:$(this).attr("href")},n=location.protocol+"//"+location.host+c;t.prop.slice(0,n.length)===n&&e.ctrlKey===!1&&(e.preventDefault(),route=t.prop.slice(n.length,t.prop.length),Backbone.history.navigate(route,!0))})}var h=$("meta[name=controllerName]").attr("content");require(["controller/header","controller/"+h],function(e,t){e.run(),t.run()})}),define("app",function(){});